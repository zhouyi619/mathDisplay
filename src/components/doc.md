

[点击前往计算器](./1.html)

初始房价A，首付率D，初始就有资金$A\times D$，房价增长率R，货款年数n，货款年化利率B，采用等额本息还款。

租房时租售比1：r，年租金增长率T，初始资金用于存款，后续原本用来支付还款的资金也用来存款，存款年化利率Y。

>根据上海的现实数据，2020-2015年房价指数与房租指数分别为
>
>[104.6  102.2  100.4  100.1  131.8  118.4]
>
>[101.1  101.0  101.8  99.7  101.8  107.3]
>
>可见房价涨幅与房租涨幅无明显联系
>
>> 数据来源国家统计局

---



首先选择x轴，y轴，z轴数据

x，y轴数据可选上方的数据，z轴可选

[买房总开销，租房总开销，买房总开销 - 租房总开销，

买房总收益，租房总收益，买房总收益 - 租房总收益

买房总资产，租房总资产，买房总资产 - 租房总资产]



选择完成后下方输入框会自动更新，x，y轴选择的数据显示为三空，分别为最小值，最大值，步长，函数。

所有输入框的值均支持简单计算，文档最下方有一个操作符表以供参考

函数框内使用x作为自变量

全部输入完毕后点击"计算"并耐心等待，计算完成后会自动绘图

绘图完成后可以随意拖动，页面最下方将显示截图和导出键用于截图和导出数据


---
### 算式
//TODO 自定义算式

买房月供P：
$$
P=[A\times(1-D)]\times\frac{\frac{B}{12}\times(1+\frac{B}{12})^{12n}}{(1+\frac{B}{12})^{12n}-1}
$$
买房总开销：
$$
\sum_{k=1}^{n\times12}P
$$
买房总收入始终为0

租房起始租金$S_1$:
$$
S_1 = A \times \frac{1}{r}
$$
年租金C为
$$
C_k = S_1\times(1+T)^{k-1}\times12
$$
总租金既总开支为：
$$
\sum_{k=1}^n C_k = \frac{12S_1 - 12S_1 \times (1+T)^{n}}{-T}
$$

存款收益可使用零存整取计算或仅计算初始资金的收入
若按零存整取计算，本息和既总收入$E_k$为
$$
E_k = A \times D \times(1+Y)^n + P \times \frac{12n + 1}{2}\times 12n \times \frac{Y}{2}
$$

若仅计算初始资金收入,本息和既总收入$E_k$为
$$
E_k = A \times D \times(1+Y)^n
$$
总资产计算方式为
$$
T_总 = 资产 + 总收入 - 总开销
$$
关于资产既房屋价值$A_k$：
$$
\left\{
\begin{array}{l}
A_0 = A\\
A_k = A_{k-1} \times (1+R_k\%)
\end{array}
\right.
$$
其中$R_k$在不作为x，y轴数据时为：	
$$
R_k = F \times\frac{1}{1+e^{k-G}}-O
$$
上述函数中$F,G,O$为可设置的常数,分别称为房价增长率，半衰位置，折损率，$R_k$的图像为S型曲线，$\lim_{k\to-\infty}R_k=F-O$，$\lim_{k\to\infty}R_k=-O$且关于$(G,R_G)$中心对称，在$F=5,G=30,O=0.5$时其大致图像如下:

![](https://imgcdn.zhouyi619.top//202310202051232.webp)

> 其实%是我写程序到一半才发现写错的临时补救措施




---
####  操作符表

注：无论有多少层括号均使用英文小括号，中英文逗号均可接受，纯数值计算所以三角函数等存在非常小的误差，例子$sin(2pi) \approx -2.4\times10^{-16}$

| 名称 | 操作符 | 限制及注意事项 | 示例 |
| :--- | ------ | ---- | ---- |
| 加   | +      | 无   | 1+1  |
|减|-|无|2-1|
|乘|\*|无|2\*1|
|除|/|除数不能为0|2/1|
|绝对值|abs()|无|abs(-1)|
|幂|^|可以用于实现倒数和根号，倒数下不能为0，偶次根下不能为负数|2^1|
|三角函数|sin() cos() tan()|默认弧度制，角度值需要在数字后加空格加deg|sin(pi)|
|常数|e pi|无|cos(pi)|
|对数|log(真数,底数)|真数不能为负数|log(e^2,e)|


---

